# 추경 예산 업로드 가이드

## 📋 추경 예산이란?

추경 예산은 본예산 이후에 발생하는 예산 변경사항을 반영한 것입니다.

**일반적인 추경 구성:**
- 본예산 사업 중 일부 사업의 예산 증감
- 신규 사업 추가
- 기존 사업 삭제 또는 축소

**예시:**
- 본예산: 15개 사업
- 1차 추경: 신규 3개 사업 추가 + 기존 5개 사업 예산 증감
- 최종 추경 예산: 18개 사업 (15개 기존 + 3개 신규, 5개는 예산 변경됨)

---

## 🔄 현재 시스템의 동작 방식

### 중요: 전체 교체 방식

현재 시스템은 **같은 연도/회차로 업로드하면 기존 데이터를 완전히 삭제하고 새 데이터로 교체**합니다.

**예시:**
1. 2024년 본예산: 15개 사업 업로드
2. 2024년 1차 추경: 18개 사업 업로드 (15개 기존 + 3개 신규)
   - → 기존 15개 사업이 삭제되고, 새로운 18개 사업으로 교체됨
   - → 최종적으로 18개 사업만 저장됨

---

## 📤 추경 예산 업로드 방법

### 방법 1: 최종 상태 전체 업로드 (권장)

**추경 파일에는 최종 상태의 모든 사업을 포함해야 합니다.**

#### 엑셀 파일 구성 예시:

```
사업명              | 소관부서 | 합계      | 국비 | 도비 | 시군비 | 자체
-------------------|---------|----------|------|------|--------|------
기존사업1 (증액)    | 부서A   | 1,500,000 | 0    | 500  | 0      | 1,000
기존사업2 (감액)    | 부서B   | 800,000   | 0    | 300  | 0      | 500
기존사업3 (변경없음)| 부서C   | 1,200,000 | 0    | 400  | 0      | 800
... (나머지 기존 사업들)
신규사업1          | 부서D   | 2,000,000 | 0    | 800  | 0      | 1,200
신규사업2          | 부서E   | 1,500,000 | 0    | 600  | 0      | 900
신규사업3          | 부서F   | 1,000,000 | 0    | 400  | 0      | 600
```

**업로드 절차:**
1. 사이드바에서 **"1차 추경"** 선택
2. 추경 파일 업로드 (최종 상태의 모든 사업 포함)
3. 시스템이 기존 본예산 데이터를 삭제하고 추경 데이터로 교체

**장점:**
- 간단하고 명확함
- 최종 상태만 관리하면 됨
- 데이터 일관성 보장

**주의사항:**
- 추경 파일에 모든 사업을 포함해야 함 (일부만 포함하면 나머지가 삭제됨)
- 본예산과 추경을 별도로 비교하려면 백업을 활용

---

### 방법 2: 추경 변경사항만 별도 관리 (향후 지원 예정)

**현재는 지원하지 않지만, 향후 개선 예정:**

추경 파일에 변경된 사업만 포함하고, 시스템이 자동으로:
- 신규 사업 추가
- 기존 사업 업데이트
- 삭제된 사업 제거

**예시 엑셀 구조 (향후 지원):**
```
구분      | 사업명        | 소관부서 | 합계      | 국비 | 도비 | 시군비 | 자체
---------|-------------|---------|----------|------|------|--------|------
신규      | 신규사업1    | 부서D   | 2,000,000 | 0    | 800  | 0      | 1,200
신규      | 신규사업2    | 부서E   | 1,500,000 | 0    | 600  | 0      | 900
변경      | 기존사업1    | 부서A   | 1,500,000 | 0    | 500  | 0      | 1,000
변경      | 기존사업2    | 부서B   | 800,000   | 0    | 300  | 0      | 500
삭제      | 기존사업10   | 부서J   | 0         | 0    | 0    | 0      | 0
```

---

## 💡 실제 사용 시나리오

### 시나리오 1: 본예산 → 1차 추경

**상황:**
- 본예산: 15개 사업
- 1차 추경: 신규 3개 추가, 기존 5개 예산 변경
- 최종: 18개 사업

**절차:**
1. **본예산 업로드**
   - 사이드바: 2024년, 본예산 선택
   - 파일: "2024년 본예산.xlsx" (15개 사업)
   - 업로드

2. **1차 추경 업로드**
   - 사이드바: 2024년, 1차 추경 선택
   - 파일: "2024년 1차 추경.xlsx" (18개 사업 - 최종 상태)
   - 업로드
   - → 기존 본예산 15개가 삭제되고, 새로운 18개로 교체됨

3. **확인**
   - 사이드바에서 "1차 추경" 선택 시 18개 사업 표시
   - 사이드바에서 "본예산" 선택 시 15개 사업 표시 (별도로 유지됨)

---

### 시나리오 2: 다중 파일 업로드

**상황:**
- 여러 연도/회차의 예산을 한 번에 업로드

**절차:**
1. 파일 업로드 페이지에서 여러 파일 선택
2. 각 파일의 "설정" 버튼 클릭하여 연도/회차 지정
3. "모두 업로드" 버튼 클릭
4. 각 파일이 지정된 연도/회차로 자동 업로드

**예시:**
```
파일1: "2024년 본예산.xlsx" → 2024년, 본예산
파일2: "2024년 1차 추경.xlsx" → 2024년, 1차 추경
파일3: "2025년 본예산.xlsx" → 2025년, 본예산
```

---

## ⚠️ 주의사항

### 1. 데이터 덮어쓰기

**같은 연도/회차로 업로드하면 기존 데이터가 완전히 삭제됩니다.**

- 업로드 전에 백업을 권장합니다
- 실수로 덮어쓰는 것을 방지하려면 백업 기능을 활용하세요

### 2. 추경 파일 구성

**추경 파일에는 최종 상태의 모든 사업을 포함해야 합니다.**

- 일부 사업만 포함하면 나머지가 삭제됩니다
- 예: 본예산 15개 중 5개만 추경 파일에 포함 → 나머지 10개는 삭제됨

### 3. 본예산과 추경 비교

**본예산과 추경을 비교하려면:**
- 사이드바에서 회차를 전환하여 확인
- 또는 백업 기능을 활용하여 이전 상태 확인

---

## 🔍 추경 데이터 확인 방법

### 1. 사이드바에서 회차 선택

```
사이드바 → 회차 드롭다운
- 본예산: 15개 사업
- 1차 추경: 18개 사업
- 2차 추경: 20개 사업
```

### 2. 예산 페이지에서 확인

- 각 회차별로 예산 목록 확인
- 검색 및 필터 기능 활용

### 3. 대시보드에서 비교

- 연도별 비교 차트에서 본예산과 추경 비교 가능

---

## 📝 엑셀 파일 준비 체크리스트

### 추경 파일 업로드 전 확인사항

- [ ] 추경 파일에 **최종 상태의 모든 사업**이 포함되어 있는가?
- [ ] 신규 사업이 모두 포함되어 있는가?
- [ ] 예산이 변경된 기존 사업의 최종 금액이 반영되어 있는가?
- [ ] 삭제된 사업은 파일에서 제외되어 있는가?
- [ ] 필수 컬럼(사업명, 소관부서, 합계)이 모두 있는가?
- [ ] 재원구분(국비/도비/시군비/자체)이 올바르게 입력되어 있는가?

---

## 🚀 향후 개선 계획

### 계획 1: 추경 변경사항만 업로드

- 추경 파일에 변경된 사업만 포함
- 시스템이 자동으로 본예산과 병합
- "구분" 컬럼으로 신규/변경/삭제 구분

### 계획 2: 추경 비교 기능

- 본예산과 추경을 자동으로 비교
- 변경된 사업 하이라이트
- 증감액 자동 계산

### 계획 3: 추경 승인 워크플로우

- 추경 변경사항 검토 및 승인
- 변경 이력 자동 기록

---

## ❓ 자주 묻는 질문

### Q1: 추경 파일에 기존 사업을 모두 포함해야 하나요?

**A:** 네, 현재는 전체 교체 방식이므로 최종 상태의 모든 사업을 포함해야 합니다.

### Q2: 본예산과 추경을 동시에 비교할 수 있나요?

**A:** 현재는 사이드바에서 회차를 전환하여 각각 확인할 수 있습니다. 향후 비교 기능 추가 예정입니다.

### Q3: 추경에서 삭제된 사업은 어떻게 처리하나요?

**A:** 추경 파일에서 해당 사업을 제외하면 됩니다. 업로드 시 자동으로 삭제됩니다.

### Q4: 여러 추경을 한 번에 업로드할 수 있나요?

**A:** 네, 다중 파일 업로드 기능을 사용하면 여러 파일을 한 번에 업로드할 수 있습니다. 각 파일의 연도/회차를 설정하면 됩니다.

---

## 📞 문의사항

추가 질문이나 개선 요청이 있으시면 알려주세요!

